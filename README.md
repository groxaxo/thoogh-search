# Whoogle Search - 2026 Edition

>[!NOTE]
>**Multiple Search Provider Support**
>
>Whoogle now supports three search provider methods to ensure reliability:
>1. **Direct Google Scraping** (default) - Uses auto-generated Opera User Agents for better anti-detection
>2. **Google Custom Search API** (BYOK) - Bring Your Own Key for 100 free queries/day
>3. **SearXNG Integration** - Route through a SearXNG instance for enhanced privacy
>
>See [Search Providers](#search-providers) for configuration details.

___

![Whoogle Search](docs/banner.png)

[![Latest Release](https://img.shields.io/github/v/release/benbusby/whoogle-search)](https://github.com/benbusby/shoogle/releases)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![tests](https://github.com/benbusby/whoogle-search/actions/workflows/tests.yml/badge.svg)](https://github.com/benbusby/whoogle-search/actions/workflows/tests.yml)
[![buildx](https://github.com/benbusby/whoogle-search/actions/workflows/buildx.yml/badge.svg)](https://github.com/benbusby/whoogle-search/actions/workflows/buildx.yml)
[![Docker Pulls](https://img.shields.io/docker/pulls/benbusby/whoogle-search)](https://hub.docker.com/r/benbusby/whoogle-search)

<table>
  <tr>
    <td><a href="https://sr.ht/~benbusby/whoogle-search">SourceHut</a></td>
    <td><a href="https://github.com/benbusby/whoogle-search">GitHub</a></td>
  </tr>
</table>

Get Google search results, but without any ads, JavaScript, AMP links, cookies, or IP address tracking. Easily deployable in one click as a Docker app, and customizable with a single config file. Quick and simple to implement as a primary search engine replacement on both desktop and mobile.

Contents
1. [Features](#features)
3. [Install/Deploy Options](#install)
    1. [Docker](#docker-recommended)
    1. [Kubernetes/Helm](#helm-chart-for-kubernetes)
    1. [pipx](#pipx)
    1. [pip](#pip)
    1. [Manual](#manual)
    1. [Arch/AUR](#arch-linux--arch-based-distributions)
    1. [Cloud Platforms](#cloud-platforms)
4. [Environment Variables and Configuration](#environment-variables)
5. [Search Providers](#search-providers)
    1. [Google Custom Search (BYOK)](#google-custom-search-byok)
    2. [SearXNG Integration](#searxng-integration)
6. [Usage](#usage)
7. [Extra Steps](#extra-steps)
    1. [Set Primary Search Engine](#set-whoogle-as-your-primary-search-engine)
	2. [Custom Redirecting](#custom-redirecting)
	2. [Custom Bangs](#custom-bangs)
    3. [Manual HTTPS Enforcement](#https-enforcement)
    4. [Using with Firefox Containers](#using-with-firefox-containers)
    5. [Reverse Proxying](#reverse-proxying)
        1. [Nginx](#nginx)
    6. [Security Best Practices](#security-best-practices)
8. [Contributing](#contributing)
9. [FAQ](#faq)
10. [Public Instances](#public-instances)
11. [Screenshots](#screenshots)

## Features
- No ads or sponsored content
- No JavaScript\*
- No cookies\*\*
- No tracking/linking of your personal IP address\*\*\*
- No AMP links
- No URL tracking tags (i.e. utm=%s)
- No referrer header
- Tor and HTTP/SOCKS proxy support
- Autocomplete/search suggestions
- POST request search and suggestion queries (when possible)
- View images at full res without site redirect (currently mobile only)
- Light/Dark/System theme modes (with support for [custom CSS theming](https://github.com/benbusby/whoogle-search/wiki/User-Contributed-CSS-Themes))
- Auto-generated Opera User Agents with random rotation
  - 10 unique Opera-based UAs generated on startup from 115 language variants
  - Randomly rotated for each search request to avoid detection patterns
  - Cached across restarts with configurable refresh options
  - Fallback to safe default UA if generation fails
  - Optional display of current UA in search results footer
- Easy to install/deploy
- Multiple search provider options:
  - Direct Google scraping (default)
  - Google Custom Search API (BYOK) for reliability
  - SearXNG integration for enhanced privacy and anti-detection
- DDG-style bang (i.e. `!<tag> <query>`) searches
- User-defined [custom bangs](#custom-bangs)
- Optional location-based searching (i.e. results near \<city\>)
- Optional NoJS mode to view search results in a separate window with JavaScript blocked
- JSON output for results via content negotiation (see "JSON results (API)")

<sup>*No third party JavaScript. Whoogle can be used with JavaScript disabled, but if enabled, uses JavaScript for things like presenting search suggestions.</sup>

<sup>**No third party cookies. Whoogle uses server side cookies (sessions) to store non-sensitive configuration settings such as theme, language, etc. Just like with JavaScript, cookies can be disabled and not affect Whoogle's search functionality.</sup>

<sup>***If deployed to a remote server, or configured to send requests through a VPN, Tor, proxy, etc.</sup>

## Install

### Supported Platforms
Official Docker images are built for:
- **linux/amd64** (x86_64)
- **linux/arm64** (ARM 64-bit, Raspberry Pi 3/4/5, Apple Silicon)

**Note**: ARMv7 support (32-bit ARM, Raspberry Pi 2) was dropped in v1.2.0 due to incompatibility with modern security libraries on Alpine Linux. Users with ARMv7 devices can either:
- Use an older version (v1.1.x or earlier)
- Build locally with pinned dependencies (see notes in Dockerfile)
- Upgrade to a 64-bit OS if hardware supports it (Raspberry Pi 3+)

There are a few different ways to begin using the app, depending on your preferences:

___

### Docker (Recommended)

Docker is the recommended deployment method for production use, providing consistent and secure deployments.

#### Using Docker Hub

Pull and run the official image:

```bash
docker pull benbusby/whoogle-search
docker run -d -p 5000:5000 --name whoogle benbusby/whoogle-search
```

Access at `http://localhost:5000`

#### Using Docker Compose

Create a `docker-compose.yml`:

```yaml
version: '3.7'
services:
  whoogle:
    image: benbusby/whoogle-search:latest
    container_name: whoogle-search
    restart: unless-stopped
    ports:
      - "5000:5000"
    environment:
      - WHOOGLE_CONFIG_THEME=dark
      - WHOOGLE_CONFIG_URL=https://search.example.com
    volumes:
      - ./config:/config
```

Then run:
```bash
docker-compose up -d
```

#### Building from Source

```bash
git clone https://github.com/benbusby/whoogle-search.git
cd whoogle-search
docker build -t whoogle-search .
docker run -d -p 5000:5000 whoogle-search
```

See [Environment Variables](#environment-variables) for configuration options.

___

### Helm Chart for Kubernetes

For production deployments at scale, use the Helm chart:

```bash
helm repo add whoogle https://benbusby.github.io/whoogle-search
helm repo update
helm install whoogle whoogle/whoogle-search
```

See the [charts directory](charts/) for advanced configuration options.

___

### [pipx](https://github.com/pipxproject/pipx#install-pipx)
Persistent install:

`pipx install https://github.com/benbusby/whoogle-search/archive/refs/heads/main.zip`

Sandboxed temporary instance:

`pipx run --spec git+https://github.com/benbusby/whoogle-search.git whoogle-search`

___

### pip
`pip install whoogle-search`

```bash
$ whoogle-search --help
usage: whoogle-search [-h] [--port <port number>] [--host <ip address>] [--debug] [--https-only] [--userpass <username:password>]
                      [--proxyauth <username:password>] [--proxytype <socks4|socks5|http>] [--proxyloc <location:port>]

Whoogle Search console runner

optional arguments:
  -h, --help            Show this help message and exit
  --port <port number>  Specifies a port to run on (default 5000)
  --host <ip address>   Specifies the host address to use (default 127.0.0.1)
  --debug               Activates debug mode for the server (default False)
  --https-only          Enforces HTTPS redirects for all requests
  --userpass <username:password>
                        Sets a username/password basic auth combo (default None)
  --proxyauth <username:password>
                        Sets a username/password for a HTTP/SOCKS proxy (default None)
  --proxytype <socks4|socks5|http>
                        Sets a proxy type for all connections (default None)
  --proxyloc <location:port>
                        Sets a proxy location for all connections (default None)
```
See the [available environment variables](#environment-variables) for additional configuration.

___

### Manual

*Note: `Content-Security-Policy` headers can be sent by Whoogle if you set `WHOOGLE_CSP`.*

#### Dependencies
- [Python3](https://www.python.org/downloads/)
- `libcurl4-openssl-dev` and `libssl-dev`
  - macOS: `brew install openssl curl-openssl`
  - Ubuntu: `sudo apt-get install -y libcurl4-openssl-dev libssl-dev`
  - Arch: `pacman -S curl openssl`

#### Install

Clone the repo and run the following commands to start the app in a local-only environment:

```bash
git clone https://github.com/benbusby/whoogle-search.git
cd whoogle-search
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
./run
```
See the [available environment variables](#environment-variables) for additional configuration.

#### systemd Configuration
After building the virtual environment, you can add something like the following to `/lib/systemd/system/whoogle.service` to set up a Whoogle Search systemd service:

```ini
[Unit]
Description=Whoogle

[Service]
# Basic auth configuration, uncomment to enable
#Environment=WHOOGLE_USER=<username>
#Environment=WHOOGLE_PASS=<password>
# Proxy configuration, uncomment to enable
#Environment=WHOOGLE_PROXY_USER=<proxy username>
#Environment=WHOOGLE_PROXY_PASS=<proxy password>
#Environment=WHOOGLE_PROXY_TYPE=<proxy type (http|https|proxy4|proxy5)
#Environment=WHOOGLE_PROXY_LOC=<proxy host/ip>
# Site alternative configurations, uncomment to enable
# Note: If not set, the feature will still be available
# with default values.
#Environment=WHOOGLE_ALT_TW=farside.link/nitter
#Environment=WHOOGLE_ALT_YT=farside.link/invidious
#Environment=WHOOGLE_ALT_RD=farside.link/libreddit
#Environment=WHOOGLE_ALT_MD=farside.link/scribe
#Environment=WHOOGLE_ALT_TL=farside.link/lingva
#Environment=WHOOGLE_ALT_IMG=farside.link/rimgo
#Environment=WHOOGLE_ALT_WIKI=farside.link/wikiless
#Environment=WHOOGLE_ALT_IMDB=farside.link/libremdb
#Environment=WHOOGLE_ALT_QUORA=farside.link/quetre
#Environment=WHOOGLE_ALT_SO=farside.link/anonymousoverflow
# Load values from dotenv only
#Environment=WHOOGLE_DOTENV=1
# specify dotenv location if not in default location
#Environment=WHOOGLE_DOTENV_PATH=<path/to>/whoogle.env
Type=simple
User=<username>
# If installed as a package, add:
ExecStart=<python_install_dir>/python3 <whoogle_install_dir>/whoogle-search --host 127.0.0.1 --port 5000
# For example:
# ExecStart=/usr/bin/python3 /home/my_username/.local/bin/whoogle-search --host 127.0.0.1 --port 5000
# Otherwise if running the app from source, add:
ExecStart=<whoogle_repo_dir>/run
# For example:
# ExecStart=/var/www/whoogle-search/run
WorkingDirectory=<whoogle_repo_dir>
ExecReload=/bin/kill -HUP $MAINPID
Restart=always
RestartSec=3
SyslogIdentifier=whoogle

[Install]
WantedBy=multi-user.target
```
Then,
```
sudo systemctl daemon-reload
sudo systemctl enable whoogle
sudo systemctl start whoogle
```

#### Tor Configuration *optional*
If routing your request through Tor you will need to make the following adjustments.
Due to the nature of interacting with Google through Tor we will need to be able to send signals to Tor and therefore authenticate with it.

There are two authentication methods, password and cookie. You will need to make changes to your torrc:
  * Cookie
    1. Uncomment or add the following lines in your torrc:
       - `ControlPort 9051`
       - `CookieAuthentication 1`
       - `DataDirectoryGroupReadable 1`
       - `CookieAuthFileGroupReadable 1`

    2. Make the tor auth cookie readable:
       - This is assuming that you are using a dedicated user to run whoogle. If you are using a different user replace `whoogle` with that user.

       1. `chmod tor:whoogle /var/lib/tor`
       2. `chmod tor:whoogle /var/lib/tor/control_auth_cookie`

    3. Restart the tor service:
       - `systemctl restart tor`

    4. Set the Tor environment variable to 1, `WHOOGLE_CONFIG_TOR`. Refer to the [Environment Variables](#environment-variables) section for more details.
       - This may be added in the systemd unit file or env file `WHOOGLE_CONFIG_TOR=1`

  * Password
    1. Run this command:
       - `tor --hash-password {Your Password Here}`; put your password in place of `{Your Password Here}`.
       - Keep the output of this command, you will be placing it in your torrc.
       - Keep the password input of this command, you will be using it later.

    2. Uncomment or add the following lines in your torrc:
       - `ControlPort 9051`
       - `HashedControlPassword {Place output here}`; put the output of the previous command in place of `{Place output here}`.

    3. Now take the password from the first step and place it in the control.conf file within the whoogle working directory, ie. [misc/tor/control.conf](misc/tor/control.conf)
       - If you want to place your password file in a different location set this location with the `WHOOGLE_TOR_CONF` environment variable. Refer to the [Environment Variables](#environment-variables) section for more details.

    4. Heavily restrict access to control.conf to only be readable by the user running whoogle:
       - `chmod 400 control.conf`

    5. Finally set the Tor environment variable and use password variable to 1, `WHOOGLE_CONFIG_TOR` and `WHOOGLE_TOR_USE_PASS`. Refer to the [Environment Variables](#environment-variables) section for more details.
       - These may be added to the systemd unit file or env file:
          - `WHOOGLE_CONFIG_TOR=1`
          - `WHOOGLE_TOR_USE_PASS=1`

___

### Manual (Docker)
1. Ensure the Docker daemon is running, and is accessible by your user account
  - To add user permissions, you can execute `sudo usermod -aG docker yourusername`
  - Running `docker ps` should return something besides an error. If you encounter an error saying the daemon isn't running, try `sudo systemctl start docker` (Linux) or ensure the docker tool is running (Windows/macOS).
2. Clone and deploy the docker app using a method below:

#### Docker CLI

Through Docker Hub:
```bash
docker pull benbusby/whoogle-search
docker run --publish 5000:5000 --detach --name whoogle-search benbusby/whoogle-search:latest
```

or with docker-compose:

```bash
git clone https://github.com/benbusby/whoogle-search.git
cd whoogle-search
docker-compose up
```

or by building yourself:

```bash
git clone https://github.com/benbusby/whoogle-search.git
cd whoogle-search
docker build --tag whoogle-search:1.0 .
docker run --publish 5000:5000 --detach --name whoogle-search whoogle-search:1.0
```

Optionally, you can also enable some of the following environment variables to further customize your instance:

```bash
docker run --publish 5000:5000 --detach --name whoogle-search \
  -e WHOOGLE_USER=username \
  -e WHOOGLE_PASS=password \
  -e WHOOGLE_PROXY_USER=username \
  -e WHOOGLE_PROXY_PASS=password \
  -e WHOOGLE_PROXY_TYPE=socks5 \
  -e WHOOGLE_PROXY_LOC=ip \
  whoogle-search:1.0
```

And kill with: `docker rm --force whoogle-search`

___

### Arch Linux & Arch-based Distributions
There is an [AUR package available](https://aur.archlinux.org/packages/whoogle-git/), as well as a pre-built and daily updated package available at [Chaotic-AUR](https://chaotic.cx).

___

### Cloud Platforms

Whoogle can be deployed on various modern cloud platforms using Docker:

#### Railway
1. Create a [Railway](https://railway.app) account (free tier available)
2. Click "New Project" → "Deploy from GitHub repo"
3. Select your Whoogle fork or use the Docker image: `benbusby/whoogle-search:latest`
4. Set environment variables as needed
5. Deploy and access via the provided Railway URL

#### Render
1. Create a [Render](https://render.com) account
2. New → Web Service → Docker
3. Use Docker image: `benbusby/whoogle-search:latest`
4. Configure port 5000 and environment variables
5. Free tier available with some limitations

#### DigitalOcean App Platform
1. Create a [DigitalOcean](https://www.digitalocean.com) account
2. Apps → Create App → Docker Hub
3. Use image: `benbusby/whoogle-search:latest`
4. Configure with 512MB RAM (recommended minimum)
5. Set environment variables and deploy

#### Self-Hosted VPS
For maximum privacy and control, deploy on your own VPS:
- Providers: Digital Ocean, Linode, Hetzner, OVH, etc.
- Requirements: 512MB+ RAM, 10GB+ storage
- Set up Docker or use manual installation
- Configure HTTPS with Let's Encrypt
- Use reverse proxy (Nginx/Caddy) for SSL termination

___

### Helm chart for Kubernetes
To use the Kubernetes Helm Chart:
1. Ensure you have [Helm](https://helm.sh/docs/intro/install/) `>=3.0.0` installed
2. Add the Whoogle Helm repository:
   ```bash
   helm repo add whoogle https://benbusby.github.io/whoogle-search
   helm repo update
   ```
3. Install with custom values:
   ```bash
   helm install whoogle whoogle/whoogle-search --set image.tag=latest
   ```
4. Or clone the repository and customize [charts/whoogle/values.yaml](./charts/whoogle/values.yaml):
   ```bash
   git clone https://github.com/benbusby/whoogle-search.git
   cd whoogle-search
   helm upgrade --install whoogle ./charts/whoogle
   ```

___

## Environment Variables
There are a few optional environment variables available for customizing a Whoogle instance. These can be set manually, or copied into `whoogle.env` and enabled for your preferred deployment method:

- Local runs: Set `WHOOGLE_DOTENV=1` before running
- With `docker-compose`: Uncomment the `env_file` option
- With `docker build/run`: Add `--env-file ./whoogle.env` to your command

| Variable             | Description                                                                               |
| -------------------- | ----------------------------------------------------------------------------------------- |
| WHOOGLE_URL_PREFIX   | The URL prefix to use for the whoogle instance (i.e. "/whoogle")                          |
| WHOOGLE_DOTENV       | Load environment variables in `whoogle.env`                                               |
| WHOOGLE_DOTENV_PATH  | The path to `whoogle.env` if not in default location                                      |
| WHOOGLE_USER         | The username for basic auth. WHOOGLE_PASS must also be set if used.                       |
| WHOOGLE_PASS         | The password for basic auth. WHOOGLE_USER must also be set if used.                       |
| WHOOGLE_PROXY_USER   | The username of the proxy server.                                                         |
| WHOOGLE_PROXY_PASS   | The password of the proxy server.                                                         |
| WHOOGLE_PROXY_TYPE   | The type of the proxy server. Can be "socks5", "socks4", or "http".                       |
| WHOOGLE_PROXY_LOC    | The location of the proxy server (host or ip).                                            |
| WHOOGLE_USER_AGENT   | The desktop user agent to use when using 'env_conf' option. Leave empty to use auto-generated Opera UAs. |
| WHOOGLE_USER_AGENT_MOBILE | The mobile user agent to use when using 'env_conf' option. Leave empty to use auto-generated Opera UAs. |
| WHOOGLE_USE_CLIENT_USER_AGENT | Enable to use your own user agent for all requests. Defaults to false.           |
| WHOOGLE_UA_CACHE_PERSISTENT | Whether to persist auto-generated UAs across restarts. Set to '0' to regenerate on each startup. Default '1'. |
| WHOOGLE_UA_CACHE_REFRESH_DAYS | Auto-refresh UA cache after N days. Set to '0' to never refresh (cache persists indefinitely). Default '0'. |
| WHOOGLE_UA_LIST_FILE | Path to text file containing custom UA strings (one per line). When set, uses these instead of auto-generated UAs. |
| WHOOGLE_REDIRECTS    | Specify sites that should be redirected elsewhere. See [custom redirecting](#custom-redirecting). |
| EXPOSE_PORT          | The port where Whoogle will be exposed.                                                   |
| HTTPS_ONLY           | Enforce HTTPS. (See [here](https://github.com/benbusby/whoogle-search#https-enforcement)) |
| WHOOGLE_ALT_TW       | The twitter.com alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_ALT_YT       | The youtube.com alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_ALT_RD       | The reddit.com alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_ALT_TL       | The Google Translate alternative to use. This is used for all "translate ____" searches.  Set to "" to disable. |
| WHOOGLE_ALT_MD       | The medium.com alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_ALT_IMG      | The imgur.com alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_ALT_WIKI     | The wikipedia.org alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_ALT_IMDB     | The imdb.com alternative to use when site alternatives are enabled in the config. Set to "" to disable.  |
| WHOOGLE_ALT_QUORA    | The quora.com alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_ALT_SO       | The stackoverflow.com alternative to use when site alternatives are enabled in the config. Set to "" to disable. |
| WHOOGLE_AUTOCOMPLETE | Controls visibility of autocomplete/search suggestions. Default on -- use '0' to disable. |
| WHOOGLE_MINIMAL      | Remove everything except basic result cards from all search queries.                      |
| WHOOGLE_CSP          | Sets a default set of 'Content-Security-Policy' headers                                   |
| WHOOGLE_TOR_SERVICE  | Enable/disable the Tor service on startup. Default on -- use '0' to disable.              |
| WHOOGLE_TOR_USE_PASS | Use password authentication for tor control port. |
| WHOOGLE_TOR_CONF | The absolute path to the config file containing the password for the tor control port. Default: ./misc/tor/control.conf WHOOGLE_TOR_PASS must be 1 for this to work.|
| WHOOGLE_SHOW_FAVICONS | Show/hide favicons next to search result URLs. Default on.                               |
| WHOOGLE_UPDATE_CHECK  | Enable/disable the automatic daily check for new versions of Whoogle. Default on.        |
| WHOOGLE_FALLBACK_ENGINE_URL | Set a fallback Search Engine URL when there is internal server error or instance is rate-limited. Search query is appended to the end of the URL (eg. https://duckduckgo.com/?k1=-1&q=). |
| WHOOGLE_BUNDLE_STATIC | When set to 1, serve a single bundled CSS and JS file generated at startup to reduce requests. Default off. |
| WHOOGLE_HTTP2         | Enable HTTP/2 for upstream requests (via httpx). Default on — set to 0 to force HTTP/1.1. |

### Config Environment Variables
These environment variables allow setting default config values, but can be overwritten manually by using the home page config menu. These allow a shortcut for destroying/rebuilding an instance to the same config state every time.

| Variable                             | Description                                                     |
| ------------------------------------ | --------------------------------------------------------------- |
| WHOOGLE_CONFIG_DISABLE               | Hide config from UI and disallow changes to config by client    |
| WHOOGLE_CONFIG_COUNTRY               | Filter results by hosting country                               |
| WHOOGLE_CONFIG_LANGUAGE              | Set interface language                                          |
| WHOOGLE_CONFIG_SEARCH_LANGUAGE       | Set search result language                                      |
| WHOOGLE_CONFIG_BLOCK                 | Block websites from search results (use comma-separated list)   |
| WHOOGLE_CONFIG_BLOCK_TITLE           | Block search result with a REGEX filter on title                |
| WHOOGLE_CONFIG_BLOCK_URL             | Block search result with a REGEX filter on URL                  |
| WHOOGLE_CONFIG_THEME                 | Set theme mode (light, dark, or system)                         |
| WHOOGLE_CONFIG_SAFE                  | Enable safe searches                                            |
| WHOOGLE_CONFIG_ALTS                  | Use social media site alternatives (nitter, invidious, etc)     |
| WHOOGLE_CONFIG_NEAR                  | Restrict results to only those near a particular city           |
| WHOOGLE_CONFIG_TOR                   | Use Tor routing (if available)                                  |
| WHOOGLE_CONFIG_NEW_TAB               | Always open results in new tab                                  |
| WHOOGLE_CONFIG_VIEW_IMAGE            | Enable View Image option                                        |
| WHOOGLE_CONFIG_GET_ONLY              | Search using GET requests only                                  |
| WHOOGLE_CONFIG_URL                   | The root url of the instance (`https://<your url>/`)            |
| WHOOGLE_CONFIG_STYLE                 | The custom CSS to use for styling (should be single line)       |
| WHOOGLE_CONFIG_PREFERENCES_ENCRYPTED | Encrypt preferences token, requires preferences key             |
| WHOOGLE_CONFIG_PREFERENCES_KEY       | Key to encrypt preferences in URL (REQUIRED to show url)        |
| WHOOGLE_CONFIG_ANON_VIEW             | Include the "anonymous view" option for each search result      |
| WHOOGLE_CONFIG_SHOW_USER_AGENT       | Display the User Agent string used for search in results footer |

### Search Provider Environment Variables

These environment variables configure alternative search providers.

#### Google Custom Search (BYOK)

| Variable             | Description                                                                               |
| -------------------- | ----------------------------------------------------------------------------------------- |
| WHOOGLE_CSE_API_KEY  | Your Google API key with Custom Search API enabled                                        |
| WHOOGLE_CSE_ID       | Your Custom Search Engine ID (cx parameter)                                               |
| WHOOGLE_USE_CSE      | Enable Custom Search API by default (set to '1' to enable)                                |

#### SearXNG Integration

| Variable                | Description                                                                               |
| ----------------------- | ----------------------------------------------------------------------------------------- |
| WHOOGLE_SEARXNG_URL     | URL of your SearXNG instance (e.g., 'https://search.example.com')                         |
| WHOOGLE_USE_SEARXNG     | Enable SearXNG as search provider by default (set to '1' to enable)                       |
| WHOOGLE_SEARXNG_ENGINES | Comma-separated list of SearXNG engines to use (default: 'google')                        |

## Search Providers

Whoogle supports three different methods for retrieving search results:

1. **Direct Google Scraping** (default) - Scrapes Google's HTML search results directly
2. **Google Custom Search API (BYOK)** - Uses Google's official API with your own API key and quota
3. **SearXNG Integration** - Routes queries through a SearXNG metasearch instance

Each method has different trade-offs in terms of reliability, cost, privacy, and features. Choose the one that best fits your needs.

### Comparison Table

| Feature              | Direct Scraping          | Google CSE API       | SearXNG              |
|----------------------|--------------------------|----------------------|----------------------|
| Setup Complexity     | None (default)           | Moderate (API setup) | Easy (instance URL)  |
| Daily Limit          | None (until blocked)     | 100 free, then paid  | Depends on instance  |
| Cost                 | Free                     | Free up to 100/day   | Free                 |
| Reliability          | Can be blocked           | Always works         | High                 |
| Image search         | ✅ Full support          | ✅ Supported         | ✅ Supported         |
| News/Videos tabs     | ✅                       | ❌ Web results only  | Varies by engine     |
| Speed                | Slower (HTML parsing)    | Faster (JSON)        | Fast (JSON)          |
| Privacy              | Direct to Google         | Direct to Google     | Via SearXNG proxy    |
| JavaScript Required  | No                       | No                   | No                   |

## Google Custom Search (BYOK)

If Google blocks traditional search scraping (captchas, IP bans), you can use your own Google Custom Search Engine credentials as a fallback. This uses Google's official API with your own quota.

### Why Use This?

- **Reliability**: Official API never gets blocked or rate-limited (within quota)
- **Speed**: Direct JSON responses are faster than HTML scraping
- **Fallback**: Works when all scraping workarounds fail
- **Privacy**: Your searches still don't go through third parties—they go directly to Google with your own API key

### Limitations vs Standard Whoogle

| Feature          | Standard Scraping        | CSE API             |
|------------------|--------------------------|---------------------|
| Daily limit      | None (until blocked)     | 100 free, then paid |
| Image search     | ✅ Full support          | ✅ Supported         |
| News/Videos tabs | ✅                       | ❌ Web results only  |
| Speed            | Slower (HTML parsing)    | Faster (JSON)       |
| Reliability      | Can be blocked           | Always works        |

### Setup Steps

#### 1. Create a Custom Search Engine
1. Go to [Programmable Search Engine](https://programmablesearchengine.google.com/controlpanel/all)
2. Click **"Add"** to create a new search engine
3. Under "What to search?", select **"Search the entire web"**
4. Give it a name (e.g., "My Whoogle CSE")
5. Click **"Create"**
6. Copy your **Search Engine ID** 

#### 2. Get an API Key
1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select an existing one
3. Go to **APIs & Services** → **Library**
4. Search for **"Custom Search API"** and click **Enable**
5. Go to **APIs & Services** → **Credentials**
6. Click **"Create Credentials"** → **"API Key"**
7. Copy your API key (looks like `AIza...`)

#### 3. (Recommended) Restrict Your API Key
To prevent misuse if your key is exposed:
1. Click on your API key in Credentials
2. Under **"API restrictions"**, select **"Restrict key"**
3. Choose only **"Custom Search API"**
4. Under **"Application restrictions"**, consider adding IP restrictions if using on a server
5. Click **Save**

#### 4. Configure Whoogle

**Option A: Via Settings UI**
1. Open your Whoogle instance
2. Click the **Config** button
3. Scroll to "Google Custom Search (BYOK)" section
4. Enter your API Key and CSE ID
5. Check "Use Custom Search API"
6. Click **Apply**

**Option B: Via Environment Variables**
```bash
WHOOGLE_CSE_API_KEY=AIza...
WHOOGLE_CSE_ID=23f...
WHOOGLE_USE_CSE=1
```

### Pricing & Avoiding Charges

| Tier | Queries          | Cost                  |
|------|------------------|-----------------------|
| Free | 100/day          | $0                    |
| Paid | Up to 10,000/day | $5 per 1,000 queries  |

**⚠️ To avoid unexpected charges:**

1. **Don't add a payment method** to Google Cloud (safest option—API stops at 100/day)
2. **Set a billing budget alert**: [Billing → Budgets & Alerts](https://console.cloud.google.com/billing/budgets)
3. **Cap API usage**: APIs & Services → Custom Search API → Quotas → Set "Queries per day" to 100
4. **Monitor usage**: APIs & Services → Custom Search API → Metrics

### Troubleshooting

| Error               | Cause                     | Solution                                                        |
|---------------------|---------------------------|-----------------------------------------------------------------|
| "API key not valid" | Invalid or restricted key | Check key in Cloud Console, ensure Custom Search API is enabled |
| "Quota exceeded"    | Hit 100/day limit         | Wait until midnight PT, or enable billing                       |
| "Invalid CSE ID"    | Wrong cx parameter        | Copy ID from Programmable Search Engine control panel           |

## SearXNG Integration

SearXNG is a privacy-respecting metasearch engine that aggregates results from multiple search engines. By routing queries through a SearXNG instance, Whoogle can avoid Google's anti-bot measures while still providing search results.

### Why Use This?

- **Reliability**: SearXNG instances have their own anti-detection infrastructure, reducing blocks
- **Privacy**: Queries go through SearXNG's proxy layer, adding an extra privacy hop
- **No Quotas**: Unlike CSE API, there are no daily query limits (depends on instance)
- **Free**: No API keys or billing required
- **Flexibility**: Can aggregate results from multiple search engines, not just Google

### Limitations vs Standard Whoogle

While SearXNG provides excellent reliability and privacy, there are some considerations:

- **Instance Dependency**: Relies on the availability of your chosen SearXNG instance
- **Feature Parity**: Some Whoogle features may behave differently when using SearXNG
- **Result Quality**: Results depend on the SearXNG instance's configuration and available engines

### Setup Options

You can use SearXNG in two ways:

#### Option 1: Use a Public SearXNG Instance (Easiest)

Many public SearXNG instances are available. Some examples include:
- https://search.bus-hit.me
- https://search.sapti.me
- https://searx.tiekoetter.com

**Note**: Public instance availability may change over time. For an up-to-date list of active instances with reliability ratings, visit: https://searx.space/

#### Option 2: Self-Host SearXNG (Most Private)

For maximum privacy and control, run your own SearXNG instance. See the [SearXNG documentation](https://docs.searxng.org/) for installation instructions.

Quick setup with Docker:
```bash
docker run -d \
  --name searxng \
  -p 8080:8080 \
  -e SEARXNG_SECRET=$(openssl rand -hex 32) \
  searxng/searxng:latest
```

### Configure Whoogle to Use SearXNG

**Option A: Via Settings UI**
1. Open your Whoogle instance
2. Click the **Config** button
3. Scroll to "SearXNG Integration" section
4. Enter your SearXNG instance URL (e.g., `https://search.bus-hit.me`)
5. (Optional) Specify engines to use (default: `google`)
6. Check "Use SearXNG"
7. Click **Apply**

**Option B: Via Environment Variables**
```bash
WHOOGLE_SEARXNG_URL=https://search.bus-hit.me
WHOOGLE_USE_SEARXNG=1
WHOOGLE_SEARXNG_ENGINES=google  # Optional: comma-separated list
```

### Engine Configuration

The `WHOOGLE_SEARXNG_ENGINES` variable controls which search engines SearXNG uses:

- `google` (default) - Google search results only
- `google,bing` - Results from both Google and Bing
- `duckduckgo,qwant` - Alternative search engines

For available engines, check your SearXNG instance's `/config` endpoint.

### Troubleshooting

| Issue                      | Cause                              | Solution                                                    |
|----------------------------|------------------------------------|------------------------------------------------------------|
| "SearXNG instance unavailable" | Instance is down or URL is wrong | Check the instance URL, try a different public instance    |
| Empty results              | Engine not available on instance   | Check instance's supported engines at `/config`            |
| Slow response times        | Overloaded public instance         | Try a different instance or self-host                      |
| Connection timeout         | Network issues or instance offline | Verify instance is accessible, check firewall settings     |

## Usage
Same as most search engines, with the exception of filtering by time range.

To filter by a range of time, append ":past <time>" to the end of your search, where <time> can be `hour`, `day`, `month`, or `year`. Example: `coronavirus updates :past hour`

### JSON results (API)
Whoogle can return filtered results as JSON using the same sanitization rules as the HTML view.

- Send `Accept: application/json` or append `format=json` to the search URL.
- Example: `/search?q=whoogle` with `Accept: application/json`, or `/search?q=whoogle&format=json`.
- Response shape:

```
{
  "query": "whoogle",
  "search_type": "",
  "results": [
    {"href": "https://example.com/page", "text": "Example Page"},
    ...
  ]
}
```

Special cases:
- Feeling Lucky returns HTTP 303 with body `{ "redirect": "<url>" }`.
- Temporary blocks (captcha) return HTTP 503 with `{ "blocked": true, "error_message": "...", "query": "..." }`.

## Extra Steps

### Set Whoogle as your primary search engine
*Note: If you're using a reverse proxy to run Whoogle Search, make sure the "Root URL" config option on the home page is set to your URL before going through these steps.*

Browser settings:
  - Firefox (Desktop)
    - Version 89+
      - Navigate to your app's url, right click the address bar, and select "Add Search Engine".
    - Previous versions
      - Navigate to your app's url, and click the 3 dot menu in the address bar. At the bottom, there should be an option to "Add Search Engine".
    - Once you've added the new search engine, open your Firefox Preferences menu, click "Search" in the left menu, and use the available dropdown to select "Whoogle" from the list.
    - **Note**: If your Whoogle instance uses Firefox Containers, you'll need to [go through the steps here](#using-with-firefox-containers) to get it working properly.
  - Firefox (iOS)
    - In the mobile app Settings page, tap "Search" within the "General" section. There should be an option titled "Add Search Engine" to select. It should prompt you to enter a title and search query url - use the following elements to fill out the form:
      - Title: "Whoogle"
      - URL: `http[s]://\<your whoogle url\>/search?q=%s`
  - Firefox (Android)
    - Version <79.0.0
      - Navigate to your app's url
      - Long-press on the search text field
      - Click the "Add Search Engine" menu item
        - Select a name and click ok
      - Click the 3 dot menu in the top right
      - Navigate to the settings menu and select the "Search" sub-menu
      - Select Whoogle and press "Set as default"
    - Version >=79.0.0
      - Click the 3 dot menu in the top right
      - Navigate to the settings menu and select the "Search" sub-menu
      - Click "Add search engine"
      - Select the 'Other' radio button
        - Name: "Whoogle"
        - Search string to use: `https://\<your whoogle url\>/search?q=%s`
  - [Alfred](https://www.alfredapp.com/) (Mac OS X)
	  1. Go to `Alfred Preferences` > `Features` > `Web Search` and click `Add Custom Search`. Then configure these settings
		   - Search URL: `https://\<your whoogle url\>/search?q={query}`
		   - Title: `Whoogle for '{query}'` (or whatever you want)
		   - Keyword: `whoogle`

	  2. Go to `Default Results` and click the `Setup fallback results` button. Click `+` and add Whoogle, then  drag it to the top.
  - Chrome/Chromium-based Browsers
    - Automatic
      - Visit the home page of your Whoogle Search instance -- this will automatically add the search engine if the [requirements](https://www.chromium.org/tab-to-search/) are met (GET request, no OnSubmit script, no path). If not, you can add it manually.
    - Manual
      - Under search engines > manage search engines > add, manually enter your Whoogle instance details with a `<whoogle url>/search?q=%s` formatted search URL.

### Custom Redirecting
You can set custom site redirects using the `WHOOGLE_REDIRECTS` environment
variable. A lot of sites, such as Twitter, Reddit, etc, have built-in redirects
to [Farside links](https://sr.ht/~benbusby/farside), but you may want to define
your own.

To do this, you can use the following syntax:

```
WHOOGLE_REDIRECTS="<parent_domain>:<new_domain>"
```

For example, if you want to redirect from "badsite.com" to "goodsite.com":

```
WHOOGLE_REDIRECTS="badsite.com:goodsite.com"
```

This can be used for multiple sites as well, with comma separation:

```
WHOOGLE_REDIRECTS="badA.com:goodA.com,badB.com:goodB.com"
```

NOTE: Do not include "http(s)://" when defining your redirect.

### Custom Bangs
You can create your own custom bangs. By default, bangs are stored in 
`app/static/bangs`. See [`00-whoogle.json`](https://github.com/benbusby/whoogle-search/blob/main/app/static/bangs/00-whoogle.json)
for an example. These are parsed in alphabetical order with later files
overriding bangs set in earlier files, with the exception that DDG bangs
(downloaded to `app/static/bangs/bangs.json`) are always parsed first. Thus,
any custom bangs will always override the DDG ones.

### HTTPS Enforcement
Only needed if your setup requires Flask to redirect to HTTPS on its own -- generally this is something that doesn't need to be handled by Whoogle Search.

Note: You should have your own domain name and [an https certificate](https://letsencrypt.org/getting-started/) in order for this to work properly.

- Docker build: Add `--build-arg use_https=1` to your run command`
- Docker build: Add `--build-arg use_https=1` to your run command
- Docker image: Set the environment variable HTTPS_ONLY=1
- Pip/Pipx: Add the `--https-only` flag to the end of the `whoogle-search` command
- Default `run` script: Modify the script locally to include the `--https-only` flag at the end of the python run command

### Using with Firefox Containers
Unfortunately, Firefox Containers do not currently pass through `POST` requests (the default) to the engine, and Firefox caches the opensearch template on initial page load. To get around this, you can take the following steps to get it working as expected:

1. Remove any existing Whoogle search engines from Firefox settings
2. Enable `GET Requests Only` in Whoogle config
3. Clear Firefox cache
4. Restart Firefox
5. Navigate to Whoogle instance and [re-add the engine](#set-whoogle-as-your-primary-search-engine)

### Reverse Proxying

#### Nginx

Here is a sample Nginx config for Whoogle:

```
server {
	server_name your_domain_name.com;
	access_log /dev/null;
	error_log /dev/null;

	location / {
	    proxy_set_header X-Real-IP $remote_addr;
	    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	    proxy_set_header X-Forwarded-Proto $scheme;
	    proxy_set_header Host $host;
	    proxy_set_header X-NginX-Proxy true;
	    proxy_set_header X-Forwarded-Host $http_host;
	    proxy_pass http://localhost:5000;
	}
}
```

You can then add SSL support using LetsEncrypt by following a guide such as [this one](https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/).

### Static asset bundling (optional)
Whoogle can optionally serve a single bundled CSS and JS to reduce the number of HTTP requests.

- Enable by setting `WHOOGLE_BUNDLE_STATIC=1` and restarting the app.
- On startup, Whoogle concatenates local CSS/JS into hashed files under `app/static/build/` and templates will prefer those bundles.
- When disabled (default), templates load individual CSS/JS files for easier development.
- Note: Theme CSS (`*-theme.css`) are still loaded separately to honor user theme selection.

## User Agent Generator Tool

A standalone command-line tool is available for generating Opera User Agent strings on demand:

```bash
# Generate 10 User Agent strings (default)
python misc/generate_uas.py

# Generate custom number of UAs
python misc/generate_uas.py 20
```

This tool is useful for:
- Testing different UA strings
- Generating UAs for other projects
- Verifying UA generation patterns
- Debugging UA-related issues

## Using Custom User Agent Lists

Instead of using auto-generated Opera UA strings, you can provide your own list of User Agent strings for Whoogle to use.

### Setup

1. Create a text file with your preferred UA strings (one per line):

```
Opera/9.80 (J2ME/MIDP; Opera Mini/4.2.13337/22.478; U; en) Presto/2.4.15 Version/10.00
Opera/9.80 (Android; Linux; Opera Mobi/498; U; en) Presto/2.12.423 Version/10.1
```

2. Set the `WHOOGLE_UA_LIST_FILE` environment variable to point to your file:

```bash
# Docker
docker run -e WHOOGLE_UA_LIST_FILE=/config/my_user_agents.txt ...

# Docker Compose
environment:
  - WHOOGLE_UA_LIST_FILE=/config/my_user_agents.txt

# Manual/systemd
export WHOOGLE_UA_LIST_FILE=/path/to/my_user_agents.txt
```

### Priority Order

Whoogle uses the following priority when loading User Agent strings:

1. **Custom UA list file** (if `WHOOGLE_UA_LIST_FILE` is set and valid)
2. **Cached auto-generated UAs** (if cache exists and is valid)
3. **Newly generated UAs** (if no cache or cache expired)

### Tips

- You can use the output from `misc/check_google_user_agents.py` as your custom UA list
- Generate a list with `python misc/generate_uas.py 50 2>/dev/null > my_uas.txt`
- Mix different UA types (Opera, Firefox, Chrome) for more variety
- Keep the file readable by Whoogle (proper permissions)
- One UA string per line, blank lines are ignored

### Example Workflow

```bash
# Generate and test UAs, save working ones
python misc/generate_uas.py 100 2>/dev/null > candidate_uas.txt
python misc/check_google_user_agents.py candidate_uas.txt --output working_uas.txt

# Use the working UAs with Whoogle
export WHOOGLE_UA_LIST_FILE=./working_uas.txt
./run
```

## User Agent Testing Tool

Whoogle now includes a comprehensive testing tool (`misc/check_google_user_agents.py`) to verify which User Agent strings successfully return Google search results without triggering blocks, JavaScript-only pages, or browser upgrade prompts.

### Usage

```bash
# Test all UAs from a file
python misc/check_google_user_agents.py UAs.txt

# Save working UAs to a file (appends incrementally)
python misc/check_google_user_agents.py UAs.txt --output working_uas.txt

# Use a specific search query
python misc/check_google_user_agents.py UAs.txt --query "python programming"

# Verbose mode to see detailed results
python misc/check_google_user_agents.py UAs.txt --output working.txt --verbose

# Adjust delay between requests (default: 0.5 seconds)
python misc/check_google_user_agents.py UAs.txt --delay 1.0

# Set request timeout (default: 10 seconds)
python misc/check_google_user_agents.py UAs.txt --timeout 15.0
```

### Features

- **Incremental Results**: Working UAs are saved immediately to the output file (append mode), so progress is preserved even if interrupted
- **Duplicate Detection**: Automatically skips UAs already in the output file when resuming
- **Random Query Cycling**: By default, cycles through diverse search queries to simulate realistic usage patterns
- **Rate Limit Detection**: Detects and reports Google rate limiting with recovery instructions
- **Comprehensive Validation**: Checks for:
  - HTTP status codes (blocks, server errors, rate limits)
  - Block markers (unusual traffic, upgrade browser messages)
  - Success markers (actual search result HTML elements)
  - JavaScript-only pages and redirects
  - Response size validation

### Testing Methodology

The tool evaluates UAs against multiple criteria:

1. **HTTP Status**: Rejects 4xx/5xx errors, detects 429 rate limits
2. **Block Detection**: Searches for Google's block messages (CAPTCHA, unusual traffic, etc.)
3. **JavaScript Detection**: Identifies JS-only pages and noscript redirects
4. **Result Validation**: Confirms presence of actual search result HTML elements
5. **Content Analysis**: Validates response size and structure

This tool was used to discover and validate the working Opera UA patterns that power Whoogle's auto-generation feature.

## Security Best Practices

### 2026 Security Standards

Whoogle implements modern security standards to maximize anonymity and protection:

#### Transport Security
- **HTTPS Only**: Always use HTTPS in production
- **HSTS**: Enable HTTP Strict Transport Security headers
- **TLS 1.3**: Use modern TLS versions only (disable TLS 1.0/1.1)
- **Certificate Pinning**: Consider implementing for mobile apps

#### Headers & CSP
```nginx
# Recommended security headers for reverse proxy
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
add_header X-Frame-Options "DENY" always;
add_header X-Content-Type-Options "nosniff" always;
add_header Referrer-Policy "no-referrer" always;
add_header Permissions-Policy "geolocation=(), microphone=(), camera=()" always;
```

Set `WHOOGLE_CSP` environment variable for Content Security Policy headers.

#### DNS Privacy
- **DNS-over-HTTPS (DoH)**: Configure your system/browser to use DoH
  - Cloudflare: `https://1.1.1.1/dns-query`
  - Quad9: `https://dns.quad9.net/dns-query`
- **DNS-over-TLS (DoT)**: Alternative to DoH
- **DNSCrypt**: Another privacy-focused DNS option

#### Network Anonymization
1. **Tor Integration**: Enable Tor in Whoogle configuration for maximum anonymity
2. **VPN**: Use a no-log VPN provider (Mullvad, ProtonVPN, IVPN)
3. **Proxy Chains**: Layer SOCKS5 proxies for additional protection
4. **I2P/Lokinet**: Consider alternative anonymity networks

#### Container Security
```bash
# Run as non-root user (already configured in Dockerfile)
docker run --user 927:927 benbusby/whoogle-search

# Limit container capabilities
docker run --cap-drop=ALL --cap-add=NET_BIND_SERVICE benbusby/whoogle-search

# Read-only root filesystem
docker run --read-only --tmpfs /tmp benbusby/whoogle-search

# Resource limits
docker run --memory=512m --cpus=0.5 benbusby/whoogle-search
```

#### Monitoring & Auditing
- **Log Anonymization**: Whoogle doesn't log searches by default
- **Audit Logs**: Monitor access logs for unusual patterns
- **Intrusion Detection**: Use tools like Fail2Ban for rate limiting
- **SBOM Generation**: Track dependencies for vulnerability management

#### Authentication Best Practices
- Use strong passwords with `WHOOGLE_USER` and `WHOOGLE_PASS`
- Consider implementing OAuth2/OIDC for multi-user deployments
- Enable 2FA at the reverse proxy level (Authelia, Authentik)
- Use client certificates for additional authentication

#### Data Protection
- **No Persistent Storage**: Whoogle is stateless for search queries
- **Session Security**: Configure secure, httpOnly cookies
- **Encrypted Config**: Use `preferences_encrypted` option
- **Secure Backups**: Encrypt any configuration backups

#### Regular Maintenance
```bash
# Update dependencies regularly
pip install --upgrade -r requirements.txt

# Update Docker images
docker pull benbusby/whoogle-search:latest

# Security scanning
docker scan benbusby/whoogle-search:latest
```

For vulnerability reporting, please see `SECURITY.md` in the repository.

## Known Issues

### User Agent Strings and Image Search

**Issue**: Most, if not all, of the auto-generated Opera User Agent strings may fail when performing **image searches** on Google. This appears to be a limitation with how Google's image search validates User Agent strings.

**Impact**:
- Regular web searches work correctly with generated UAs
- Image search may return errors or no results

## Contributing

Under the hood, Whoogle is a basic Flask app with the following structure:

- `app/`
  - `routes.py`: Primary app entrypoint, contains all API routes
  - `request.py`: Handles all outbound requests, including proxied/Tor connectivity
  - `filter.py`: Functions and utilities used for filtering out content from upstream Google search results
  - `utils/`
    - `bangs.py`: All logic related to handling DDG-style "bang" queries
    - `results.py`: Utility functions for interpreting/modifying individual search results
    - `search.py`: Creates and handles new search queries
    - `session.py`: Miscellaneous methods related to user sessions
    - `ua_generator.py`: Auto-generates Opera User Agent strings with pattern-based randomization
  - `templates/`
    - `index.html`: The home page template
    - `display.html`: The search results template
    - `header.html`: A general "top of the page" query header for desktop and mobile
    - `search.html`: An iframe-able search page
    - `logo.html`: A template consisting mostly of the Whoogle logo as an SVG (separated to help keep `index.html` a bit cleaner)
    - `opensearch.xml`: A template used for supporting [OpenSearch](https://developer.mozilla.org/en-US/docs/Web/OpenSearch).
    - `imageresults.html`: An "experimental" template used for supporting the "Full Size" image feature on desktop.
  - `static/<css|js>`
    - CSS/JavaScript files, should be self-explanatory
  - `static/settings`
    - Key-value JSON files for establishing valid configuration values


If you're new to the project, the easiest way to get started would be to try fixing [an open bug report](https://github.com/benbusby/whoogle-search/issues?q=is%3Aissue+is%3Aopen+label%3Abug). If there aren't any open, or if the open ones are too stale, try taking on a [feature request](https://github.com/benbusby/whoogle-search/issues?q=is%3Aissue+is%3Aopen+label%3Aenhancement). Generally speaking, if you can write something that has any potential of breaking down in the future, you should write a test for it.

The project follows the [PEP 8 Style Guide](https://www.python.org/dev/peps/pep-0008/), but is liable to change. Static typing should always be used when possible. Function documentation is greatly appreciated, and typically follows the below format:

```python
def contains(x: list, y: int) -> bool:
    """Check a list (x) for the presence of an element (y)

    Args:
        x: The list to inspect
        y: The int to look for

    Returns:
        bool: True if the list contains the item, otherwise False
    """

    return y in x
```

#### Translating

Whoogle currently supports translations using [`translations.json`](https://github.com/benbusby/whoogle-search/blob/main/app/static/settings/translations.json). Language values in this file need to match the "value" of the according language in [`languages.json`](https://github.com/benbusby/whoogle-search/blob/main/app/static/settings/languages.json) (i.e. "lang_en" for English, "lang_es" for Spanish, etc). After you add a new set of translations to `translations.json`, open a PR with your changes and they will be merged in as soon as possible.

## FAQ
**What's the difference between this and [Searx](https://github.com/asciimoo/searx)?**

Whoogle is intended to only ever be deployed to private instances by individuals of any background, with as little effort as possible. Prior knowledge of/experience with the command line or deploying applications is not necessary to deploy Whoogle, which isn't the case with Searx. As a result, Whoogle is missing some features of Searx in order to be as easy to deploy as possible.

Whoogle also only uses Google search results, not Bing/Quant/etc, and uses the existing Google search UI to make the transition away from Google search as unnoticeable as possible.

I'm a huge fan of Searx though and encourage anyone to use that instead if they want access to other search engines/a different UI/more configuration.

**Why does the image results page look different?**

A lot of the app currently piggybacks on Google's existing support for fetching results pages with JavaScript disabled. To their credit, they've done an excellent job with styling pages, but it seems that the image results page - particularly on mobile - is a little rough. Moving forward, with enough interest, I'd like to transition to fetching the results and parsing them into a unique Whoogle-fied interface that I can style myself.

## Public Instances

*Note: Use public instances at your own discretion. The maintainers of Whoogle do not personally validate the integrity of any other instances. Popular public instances are more likely to be rate-limited or blocked.*

| Website | Country | Language | Cloudflare |
|-|-|-|-|
| [https://search.garudalinux.org](https://search.garudalinux.org) | 🇫🇮 FI | Multi-choice | ✅ |
| [https://whoogle.privacydev.net](https://whoogle.privacydev.net) | 🇫🇷 FR | English | |
| [https://whoogle.lunar.icu](https://whoogle.lunar.icu) | 🇩🇪 DE | Multi-choice | ✅ |


* A checkmark in the "Cloudflare" category here refers to the use of the reverse proxy, [Cloudflare](https://cloudflare.com). The checkmark will not be listed for a site which uses Cloudflare DNS but rather the proxying service which grants Cloudflare the ability to monitor traffic to the website.

#### Onion Instances

| Website | Country | Language |
|-|-|-|
NONE of the existing Onion accessible sites appear to be live anymore

## Screenshots
#### Desktop
![Whoogle Desktop](docs/screenshot_desktop.png)

#### Mobile
![Whoogle Mobile](docs/screenshot_mobile.png)
